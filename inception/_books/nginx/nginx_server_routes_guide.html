<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nginx: Servers e Rotas - Guia Completo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            padding: 60px 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="8" height="8" patternUnits="userSpaceOnUse"><path d="M 8 0 L 0 0 0 8" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero p {
            font-size: 1.3em;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            margin: 30px 0;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
        }

        .section-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px 40px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .section-icon {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .section-content {
            padding: 40px;
        }

        .code-block {
            background: #1e1e1e;
            color: #f8f8f2;
            padding: 30px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.8;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .code-block::before {
            content: attr(data-title);
            position: absolute;
            top: -15px;
            left: 20px;
            background: #ff6b6b;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .keyword { color: #ff79c6; font-weight: bold; }
        .string { color: #f1fa8c; }
        .number { color: #bd93f9; }
        .comment { color: #6272a4; font-style: italic; }
        .highlight { color: #50fa7b; font-weight: bold; }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .concept-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 50%;
            transform: translate(30px, -30px);
        }

        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .concept-card h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.3em;
            position: relative;
            z-index: 1;
        }

        .flow-container {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 40px;
            border-radius: 20px;
            margin: 30px 0;
            color: white;
        }

        .flow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }

        .flow-step {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            flex: 1;
            min-width: 200px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .flow-step::after {
            content: '‚Üí';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            font-weight: bold;
        }

        .flow-step:last-child::after {
            display: none;
        }

        .flow-step-number {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
            font-size: 18px;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .comparison-item {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
        }

        .comparison-item.server {
            border-top: 5px solid #4facfe;
        }

        .comparison-item.location {
            border-top: 5px solid #43e97b;
        }

        .comparison-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .comparison-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .server-icon { background: #4facfe; }
        .location-icon { background: #43e97b; }

        .example-showcase {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin: 30px 0;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .example-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .highlight-box {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 10px 25px rgba(79, 172, 254, 0.3);
        }

        .highlight-box h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .tag {
            display: inline-block;
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin: 5px 5px 5px 0;
        }

        @media (max-width: 768px) {
            .hero h1 { font-size: 2em; }
            .section-content { padding: 20px; }
            .comparison { grid-template-columns: 1fr; }
            .flow-steps { flex-direction: column; }
            .flow-step::after { 
                content: '‚Üì'; 
                right: auto; 
                bottom: -25px; 
                top: auto; 
                left: 50%; 
                transform: translateX(-50%); 
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <div class="hero-content">
                <h1>üåê Nginx: Servers & Rotas</h1>
                <p>Domine os conceitos fundamentais de como o Nginx organiza e roteia suas aplica√ß√µes web</p>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-icon">üè†</div>
                <div>
                    <h2>O que √© um Server Block?</h2>
                    <p>A funda√ß√£o do seu site</p>
                </div>
            </div>
            <div class="section-content">
                <p>Um <strong>server block</strong> no Nginx √© como uma "casa virtual" onde sua aplica√ß√£o mora. Cada bloco define:</p>
                
                <div class="concept-grid">
                    <div class="concept-card">
                        <h3>üéØ Identifica√ß√£o</h3>
                        <p>Qual dom√≠nio ou IP vai atender</p>
                        <div class="tag">server_name</div>
                    </div>
                    <div class="concept-card">
                        <h3>üö™ Portas</h3>
                        <p>Quais portas vai escutar</p>
                        <div class="tag">listen</div>
                    </div>
                    <div class="concept-card">
                        <h3>üîê SSL</h3>
                        <p>Configura√ß√µes de seguran√ßa</p>
                        <div class="tag">ssl_certificate</div>
                    </div>
                    <div class="concept-card">
                        <h3>üìÅ Documentos</h3>
                        <p>Onde est√£o os arquivos</p>
                        <div class="tag">root</div>
                    </div>
                </div>

                <div class="code-block" data-title="Exemplo de Server Block">
<span class="keyword">server</span> {
    <span class="comment"># Escuta nas portas 80 e 443</span>
    <span class="keyword">listen</span> <span class="number">80</span>;
    <span class="keyword">listen</span> <span class="number">443 ssl</span>;
    
    <span class="comment"># Atende este dom√≠nio</span>
    <span class="keyword">server_name</span> <span class="string">exemplo.com www.exemplo.com</span>;
    
    <span class="comment"># Pasta dos arquivos</span>
    <span class="keyword">root</span> <span class="string">/var/www/html</span>;
    
    <span class="comment"># Arquivo padr√£o</span>
    <span class="keyword">index</span> <span class="string">index.html index.php</span>;
    
    <span class="comment"># As rotas ficam aqui</span>
    <span class="keyword">location</span> <span class="highlight">/</span> {
        <span class="comment"># Configura√ß√µes das rotas</span>
    }
}
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-icon">üõ§Ô∏è</div>
                <div>
                    <h2>O que s√£o Rotas (Locations)?</h2>
                    <p>Mapeando caminhos para a√ß√µes</p>
                </div>
            </div>
            <div class="section-content">
                <p>As <strong>rotas (locations)</strong> s√£o as "regras de tr√¢nsito" dentro do seu server. Elas decidem o que fazer quando algu√©m acessa diferentes URLs.</p>

                <div class="highlight-box">
                    <h4>üí° Analogia Simples</h4>
                    <p><strong>Server =</strong> Pr√©dio comercial<br>
                    <strong>Location =</strong> Placas indicando "Elevador √† esquerda", "Banheiro no fim do corredor"</p>
                </div>

                <div class="concept-grid">
                    <div class="concept-card">
                        <h3>üéØ Exata</h3>
                        <p><code>location = /login</code></p>
                        <p>Apenas <strong>exatamente</strong> /login</p>
                    </div>
                    <div class="concept-card">
                        <h3>üî§ Prefixo</h3>
                        <p><code>location /admin</code></p>
                        <p>URLs que <strong>come√ßam</strong> com /admin</p>
                    </div>
                    <div class="concept-card">
                        <h3>‚ö° Regex</h3>
                        <p><code>location ~ \.php$</code></p>
                        <p>URLs que <strong>terminam</strong> com .php</p>
                    </div>
                    <div class="concept-card">
                        <h3>üè† Padr√£o</h3>
                        <p><code>location /</code></p>
                        <p>Pega <strong>tudo</strong> que n√£o bateu</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-icon">‚öñÔ∏è</div>
                <div>
                    <h2>Server vs Location</h2>
                    <p>Entendendo as diferen√ßas</p>
                </div>
            </div>
            <div class="section-content">
                <div class="comparison">
                    <div class="comparison-item server">
                        <div class="comparison-header">
                            <div class="comparison-icon server-icon">üè†</div>
                            <h3>SERVER BLOCK</h3>
                        </div>
                        <p><strong>Escopo:</strong> Site inteiro</p>
                        <p><strong>Fun√ß√£o:</strong> Define QUAL site</p>
                        <p><strong>Configura√ß√µes:</strong></p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Dom√≠nio (server_name)</li>
                            <li>Portas (listen)</li>
                            <li>SSL/TLS</li>
                            <li>Pasta raiz</li>
                            <li>Logs</li>
                        </ul>
                        <div class="highlight-box">
                            <strong>Exemplo:</strong><br>
                            "Este bloco atende efaustin.42.fr na porta 443 com SSL"
                        </div>
                    </div>
                    
                    <div class="comparison-item location">
                        <div class="comparison-header">
                            <div class="comparison-icon location-icon">üõ§Ô∏è</div>
                            <h3>LOCATION BLOCK</h3>
                        </div>
                        <p><strong>Escopo:</strong> URLs espec√≠ficas</p>
                        <p><strong>Fun√ß√£o:</strong> Define O QUE fazer</p>
                        <p><strong>Configura√ß√µes:</strong></p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Processamento de arquivos</li>
                            <li>Redirecionamentos</li>
                            <li>Proxy reverso</li>
                            <li>Rewrite de URLs</li>
                            <li>Controle de acesso</li>
                        </ul>
                        <div class="highlight-box">
                            <strong>Exemplo:</strong><br>
                            "Quando acessarem /adminer/, processar com PHP"
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-container">
            <h2>üîÑ Como o Nginx Processa uma Requisi√ß√£o</h2>
            <p>O caminho que uma requisi√ß√£o percorre desde a chegada at√© a resposta</p>
            
            <div class="flow-steps">
                <div class="flow-step">
                    <div class="flow-step-number">1</div>
                    <h4>Requisi√ß√£o Chega</h4>
                    <p>https://efaustin.42.fr/adminer/</p>
                </div>
                <div class="flow-step">
                    <div class="flow-step-number">2</div>
                    <h4>Encontra Server</h4>
                    <p>server_name = efaustin.42.fr<br>listen 443 ssl</p>
                </div>
                <div class="flow-step">
                    <div class="flow-step-number">3</div>
                    <h4>Busca Location</h4>
                    <p>location /adminer/<br>bate com o padr√£o</p>
                </div>
                <div class="flow-step">
                    <div class="flow-step-number">4</div>
                    <h4>Executa A√ß√£o</h4>
                    <p>Processa com PHP<br>via FastCGI</p>
                </div>
                <div class="flow-step">
                    <div class="flow-step-number">5</div>
                    <h4>Retorna Resposta</h4>
                    <p>HTML do Adminer<br>para o usu√°rio</p>
                </div>
            </div>
        </div>

        <div class="example-showcase">
            <h2>üöÄ Exemplos Pr√°ticos do Seu Projeto</h2>
            <p>Vamos ver como funciona na configura√ß√£o do efaustin.42.fr</p>
            
            <div class="example-grid">
                <div class="example-card">
                    <h4>üåê Server Principal</h4>
                    <p><strong>Dom√≠nio:</strong> efaustin.42.fr</p>
                    <p><strong>Porta:</strong> 443 SSL</p>
                    <p><strong>Arquivos:</strong> /var/www/wordpress</p>
                </div>
                <div class="example-card">
                    <h4>üè† Rota Principal</h4>
                    <p><strong>Padr√£o:</strong> location /</p>
                    <p><strong>A√ß√£o:</strong> WordPress</p>
                    <p><strong>Arquivo:</strong> index.php</p>
                </div>
                <div class="example-card">
                    <h4>üîß Rota Adminer</h4>
                    <p><strong>Padr√£o:</strong> location /adminer/</p>
                    <p><strong>A√ß√£o:</strong> Interface DB</p>
                    <p><strong>Arquivo:</strong> adminer/index.php</p>
                </div>
                <div class="example-card">
                    <h4>‚ö° Rota PHP</h4>
                    <p><strong>Padr√£o:</strong> location ~ \.php$</p>
                    <p><strong>A√ß√£o:</strong> Processar PHP</p>
                    <p><strong>Via:</strong> FastCGI</p>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-icon">üìã</div>
                <div>
                    <h2>Configura√ß√£o Completa Explicada</h2>
                    <p>Seu arquivo default.conf decomposto</p>
                </div>
            </div>
            <div class="section-content">
                <div class="code-block" data-title="Sua Configura√ß√£o Atual">
<span class="comment"># SERVER 1: Redireciona HTTP para HTTPS</span>
<span class="keyword">server</span> {
    <span class="keyword">listen</span> <span class="number">80</span> <span class="highlight">default_server</span>;
    <span class="keyword">server_name</span> <span class="string">efaustin.42.fr</span>;
    <span class="keyword">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri</span>;
}

<span class="comment"># SERVER 2: Site principal HTTPS</span>
<span class="keyword">server</span> {
    <span class="keyword">listen</span> <span class="number">443 ssl</span>;
    <span class="keyword">server_name</span> <span class="string">efaustin.42.fr</span>;
    <span class="keyword">root</span> <span class="string">/var/www/wordpress</span>;
    
    <span class="comment"># ROTA 1: Adminer espec√≠fico</span>
    <span class="keyword">location</span> <span class="highlight">/adminer/</span> {
        <span class="keyword">try_files</span> <span class="string">$uri $uri/ /adminer/index.php$is_args$args</span>;
    }
    
    <span class="comment"># ROTA 2: WordPress padr√£o</span>
    <span class="keyword">location</span> <span class="highlight">/</span> {
        <span class="keyword">try_files</span> <span class="string">$uri $uri/ /index.php$is_args$args</span>;
    }
    
    <span class="comment"># ROTA 3: Processar PHP</span>
    <span class="keyword">location</span> <span class="highlight">~ \.php$</span> {
        <span class="keyword">fastcgi_pass</span> <span class="string">wordpress:9000</span>;
    }
}
                </div>

                <div class="highlight-box">
                    <h4>üéØ O que acontece:</h4>
                    <p><strong>http://efaustin.42.fr</strong> ‚Üí Server 1 ‚Üí Redireciona para HTTPS</p>
                    <p><strong>https://efaustin.42.fr/</strong> ‚Üí Server 2, Rota 2 ‚Üí WordPress</p>
                    <p><strong>https://efaustin.42.fr/adminer/</strong> ‚Üí Server 2, Rota 1 ‚Üí Adminer</p>
                    <p><strong>*.php</strong> ‚Üí Server 2, Rota 3 ‚Üí Processa com PHP-FPM</p>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-icon">‚≠ê</div>
                <div>
                    <h2>Resumo dos Conceitos</h2>
                    <p>Os pontos principais para lembrar</p>
                </div>
            </div>
            <div class="section-content">
                <div class="concept-grid">
                    <div class="concept-card">
                        <h3>üè† Server Block</h3>
                        <p>‚Ä¢ Define QUAL site atender</p>
                        <p>‚Ä¢ Configura√ß√µes globais</p>
                        <p>‚Ä¢ Um por dom√≠nio/porta</p>
                        <p>‚Ä¢ Container das locations</p>
                    </div>
                    <div class="concept-card">
                        <h3>üõ§Ô∏è Location Block</h3>
                        <p>‚Ä¢ Define O QUE fazer</p>
                        <p>‚Ä¢ A√ß√µes espec√≠ficas por URL</p>
                        <p>‚Ä¢ M√∫ltiplas por server</p>
                        <p>‚Ä¢ Ordem importa!</p>
                    </div>
                    <div class="concept-card">
                        <h3>üîÑ Fluxo</h3>
                        <p>‚Ä¢ Requisi√ß√£o ‚Üí Server</p>
                        <p>‚Ä¢ Server ‚Üí Location</p>
                        <p>‚Ä¢ Location ‚Üí A√ß√£o</p>
                        <p>‚Ä¢ A√ß√£o ‚Üí Resposta</p>
                    </div>
                    <div class="concept-card">
                        <h3>‚ö° Performance</h3>
                        <p>‚Ä¢ Locations mais espec√≠ficas primeiro</p>
                        <p>‚Ä¢ Regex por √∫ltimo</p>
                        <p>‚Ä¢ Cache quando poss√≠vel</p>
                        <p>‚Ä¢ Monitor de logs</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>